cd /demo 

unset USE_HOST_DOCKER_SOCKET
setenforce 0
./openshift start --listenAddr="0.0.0.0:8080"


#on laptop:
cd ~/demofiles
export K8S=ec2-54-166-172-113.compute-1.amazonaws.com
unproxy

# Convert template to config
curl -ld @template/template.json http://$K8S:8080/osapi/v1beta1/templateConfigs | json > processed/template.processed.json

# Deploy the config
/home/bparees/git/gocode/src/github.com/openshift/origin/_output/go/bin/openshift kube -h http://$K8S:8080 apply -c ~/demofiles/processed/template.processed.json

# define a build cfg
curl -H "Content-Type:application/json" -d @buildcfg/buildcfg.json http://$K8S:8080/osapi/v1beta1/buildConfigs | json

# show build cfgs
curl http://$K8S:8080/osapi/v1beta1/buildConfigs | json

#run build
#curl -v -A "GitHub-Hookshot/github" -H "Content-Type:application/json" -H "X-Github-Event:ping" -d @buildinvoke/pingevent.json http://$K8S:8080/osapi/v1beta1/buildConfigHooks/build100/secret101/github
cd ~/demofiles/app
edit app.rb
git commit -am . ; git push origin master

#show build running
curl http://$K8S:8080/osapi/v1beta1/builds | json



